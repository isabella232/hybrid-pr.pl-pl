---
title: Wykrywanie poza magazynem przy użyciu platformy Azure i Azure Stack Edge
description: Dowiedz się, jak używać platformy Azure i Azure Stack Edge do implementowania wykrywania poza magazynem.
author: BryanLa
ms.topic: article
ms.date: 05/24/2021
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 05/24/2021
ms.openlocfilehash: b25a6391c4e64fa7018031bac4fb7d098c56b529
ms.sourcegitcommit: cf2c4033d1b169f5b63980ce1865281366905e2e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/25/2021
ms.locfileid: "110343879"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="f3c46-103">Wykrywanie poza magazynem we wzorcu brzegowym</span><span class="sxs-lookup"><span data-stu-id="f3c46-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="f3c46-104">Ten wzorzec ilustruje sposób określania, czy na półce nie ma elementów magazynowych, przy użyciu Azure Stack Edge lub Azure IoT Edge i kamer sieciowych.</span><span class="sxs-lookup"><span data-stu-id="f3c46-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="f3c46-105">Kontekst i problem</span><span class="sxs-lookup"><span data-stu-id="f3c46-105">Context and problem</span></span>

<span data-ttu-id="f3c46-106">Fizyczne sklepy detaliczne tracą sprzedaż, ponieważ gdy klienci poszukają produktu, nie jest on na półce.</span><span class="sxs-lookup"><span data-stu-id="f3c46-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="f3c46-107">Jednak element mógł być na zasypce sklepu i nie został ponownie wsadowy.</span><span class="sxs-lookup"><span data-stu-id="f3c46-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="f3c46-108">Sklepy będą chciały wydajniej korzystać ze swoich pracowników i automatycznie powiadamiać o konieczności ponownego dokańczania zapasów.</span><span class="sxs-lookup"><span data-stu-id="f3c46-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="f3c46-109">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="f3c46-109">Solution</span></span>

<span data-ttu-id="f3c46-110">W przykładzie rozwiązania używane jest urządzenie brzegowe, takie Azure Stack Edge w każdym magazynie, które efektywnie przetwarza dane z kamer w sklepie.</span><span class="sxs-lookup"><span data-stu-id="f3c46-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="f3c46-111">Ten zoptymalizowany projekt umożliwia magazyny tylko odpowiednich zdarzeń i obrazów do chmury.</span><span class="sxs-lookup"><span data-stu-id="f3c46-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="f3c46-112">Projekt oszczędza przepustowość i miejsce do magazynowania oraz zapewnia prywatność klientów.</span><span class="sxs-lookup"><span data-stu-id="f3c46-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="f3c46-113">Gdy ramki są odczytywane z poszczególnych aparatów, model uczenia maszynowego przetwarza obraz i zwraca wszystkie obszary poza magazynem.</span><span class="sxs-lookup"><span data-stu-id="f3c46-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="f3c46-114">Obraz i obszary magazynowe są wyświetlane w lokalnej aplikacji internetowej.</span><span class="sxs-lookup"><span data-stu-id="f3c46-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="f3c46-115">Te dane można wysłać do środowiska usługi Time Series Insights w celu pokazania szczegółowych informacji Power BI.</span><span class="sxs-lookup"><span data-stu-id="f3c46-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Architektura rozwiązania out of stock at edge](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="f3c46-117">Oto jak działa to rozwiązanie:</span><span class="sxs-lookup"><span data-stu-id="f3c46-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="f3c46-118">Obrazy są przechwytywane z kamery sieciowej za pośrednictwem protokołu HTTP lub RTSP.</span><span class="sxs-lookup"><span data-stu-id="f3c46-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="f3c46-119">Rozmiar obrazu jest zmieniany i wysyłany do sterownika wnioskowania, który komunikuje się z modelem uczenia maszynowego w celu określenia, czy istnieją jakieś obrazy chybne.</span><span class="sxs-lookup"><span data-stu-id="f3c46-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="f3c46-120">Model uczenia maszynowego zwraca wszystkie obszary magazynowe.</span><span class="sxs-lookup"><span data-stu-id="f3c46-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="f3c46-121">Sterownik wnioskowania przekazuje nieprzetworzony obraz do obiektu blob (jeśli został określony) i wysyła wyniki z modelu do Azure IoT Hub i procesora pola granicznego na urządzeniu.</span><span class="sxs-lookup"><span data-stu-id="f3c46-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="f3c46-122">Procesor pól granicznych dodaje pola granic do obrazu i buforuje ścieżkę obrazu w bazie danych w pamięci.</span><span class="sxs-lookup"><span data-stu-id="f3c46-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="f3c46-123">Aplikacja internetowa wykonuje zapytanie o obrazy i wyświetla je w otrzymanej kolejności.</span><span class="sxs-lookup"><span data-stu-id="f3c46-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="f3c46-124">Komunikaty z IoT Hub są agregowane w Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="f3c46-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="f3c46-125">Power BI interaktywny raport z 100 000 000 000 000 000 000 000 000 000 000 000 000 000 000 Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="f3c46-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="f3c46-126">Składniki</span><span class="sxs-lookup"><span data-stu-id="f3c46-126">Components</span></span>

<span data-ttu-id="f3c46-127">To rozwiązanie używa następujących składników:</span><span class="sxs-lookup"><span data-stu-id="f3c46-127">This solution uses the following components:</span></span>

| <span data-ttu-id="f3c46-128">Warstwa</span><span class="sxs-lookup"><span data-stu-id="f3c46-128">Layer</span></span> | <span data-ttu-id="f3c46-129">Składnik</span><span class="sxs-lookup"><span data-stu-id="f3c46-129">Component</span></span> | <span data-ttu-id="f3c46-130">Opis</span><span class="sxs-lookup"><span data-stu-id="f3c46-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="f3c46-131">Sprzęt w środowisku lokalnym</span><span class="sxs-lookup"><span data-stu-id="f3c46-131">On-premises hardware</span></span> | <span data-ttu-id="f3c46-132">Aparat sieciowy</span><span class="sxs-lookup"><span data-stu-id="f3c46-132">Network camera</span></span> | <span data-ttu-id="f3c46-133">Wymagana jest kamera sieciowa ze źródłami danych HTTP lub RTSP w celu zapewnienia obrazów do wnioskowania.</span><span class="sxs-lookup"><span data-stu-id="f3c46-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="f3c46-134">Azure</span><span class="sxs-lookup"><span data-stu-id="f3c46-134">Azure</span></span> | <span data-ttu-id="f3c46-135">Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="f3c46-135">Azure IoT Hub</span></span> | <span data-ttu-id="f3c46-136">[Azure IoT Hub](/azure/iot-hub/) obsługuje aprowizowanie urządzeń i obsługę komunikatów dla urządzeń brzegowych.</span><span class="sxs-lookup"><span data-stu-id="f3c46-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="f3c46-137">Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="f3c46-137">Azure Time Series Insights</span></span> | <span data-ttu-id="f3c46-138">[Azure Time Series Insights](/azure/time-series-insights/) przechowuje komunikaty z IoT Hub wizualizacji.</span><span class="sxs-lookup"><span data-stu-id="f3c46-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="f3c46-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="f3c46-139">Power BI</span></span> | <span data-ttu-id="f3c46-140">[Firma Microsoft Power BI](https://powerbi.microsoft.com/) udostępnia raporty dla firmy dotyczące zdarzeń poza magazynem.</span><span class="sxs-lookup"><span data-stu-id="f3c46-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="f3c46-141">Power BI udostępnia łatwy w użyciu interfejs pulpitu nawigacyjnego do wyświetlania danych wyjściowych Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="f3c46-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="f3c46-142">Azure Stack Edge lub</span><span class="sxs-lookup"><span data-stu-id="f3c46-142">Azure Stack Edge or</span></span><br><span data-ttu-id="f3c46-143">Azure IoT Edge urządzenia</span><span class="sxs-lookup"><span data-stu-id="f3c46-143">Azure IoT Edge device</span></span> | <span data-ttu-id="f3c46-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="f3c46-144">Azure IoT Edge</span></span> | <span data-ttu-id="f3c46-145">[Azure IoT Edge](/azure/iot-edge/) orkiestruje środowisko uruchomieniowe dla kontenerów lokalnych oraz obsługuje zarządzanie urządzeniami i aktualizacje.</span><span class="sxs-lookup"><span data-stu-id="f3c46-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="f3c46-146">Projekt platformy Azure brainwave</span><span class="sxs-lookup"><span data-stu-id="f3c46-146">Azure project brainwave</span></span> | <span data-ttu-id="f3c46-147">Na urządzeniu Azure Stack Edge projekt [Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) używa układów Field-Programmable Gate Arrays (FPGA) do przyspieszania wnioskowania uczenia maszynowego.</span><span class="sxs-lookup"><span data-stu-id="f3c46-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="f3c46-148">Problemy i kwestie do rozważenia</span><span class="sxs-lookup"><span data-stu-id="f3c46-148">Issues and considerations</span></span>

<span data-ttu-id="f3c46-149">Podejmując decyzję o wdrożeniu tego rozwiązania, należy wziąć pod uwagę następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="f3c46-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="f3c46-150">Skalowalność</span><span class="sxs-lookup"><span data-stu-id="f3c46-150">Scalability</span></span>

<span data-ttu-id="f3c46-151">Większość modeli uczenia maszynowego może działać tylko z określoną liczbą ramek na sekundę, w zależności od dostarczonego sprzętu.</span><span class="sxs-lookup"><span data-stu-id="f3c46-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="f3c46-152">Określ optymalną szybkość próbkowania z aparatów, aby upewnić się, że potok uczenia maszynowego nie będzie back up.</span><span class="sxs-lookup"><span data-stu-id="f3c46-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="f3c46-153">Różne typy sprzętu będą obsługiwać różne liczby aparatów i klatek.</span><span class="sxs-lookup"><span data-stu-id="f3c46-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="f3c46-154">Dostępność</span><span class="sxs-lookup"><span data-stu-id="f3c46-154">Availability</span></span>

<span data-ttu-id="f3c46-155">Ważne jest, aby rozważyć, co może się zdarzyć, jeśli urządzenie brzegowe utraci łączność.</span><span class="sxs-lookup"><span data-stu-id="f3c46-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="f3c46-156">Zastanów się, jakie dane mogą zostać utracone z Time Series Insights i Power BI nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="f3c46-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="f3c46-157">Podane przykładowe rozwiązanie nie zostało zaprojektowane z myślą o wysokiej dostępie.</span><span class="sxs-lookup"><span data-stu-id="f3c46-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="f3c46-158">Możliwości zarządzania</span><span class="sxs-lookup"><span data-stu-id="f3c46-158">Manageability</span></span>

<span data-ttu-id="f3c46-159">To rozwiązanie może obejmować wiele urządzeń i lokalizacji, co może być niewygodne.</span><span class="sxs-lookup"><span data-stu-id="f3c46-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="f3c46-160">Usługi IoT platformy Azure mogą automatycznie wprowadzać nowe lokalizacje i urządzenia w tryb online oraz być na bieżąco z nimi aktualizowane.</span><span class="sxs-lookup"><span data-stu-id="f3c46-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="f3c46-161">Należy również przestrzegać odpowiednich procedur zarządzania danymi.</span><span class="sxs-lookup"><span data-stu-id="f3c46-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="f3c46-162">Zabezpieczenia</span><span class="sxs-lookup"><span data-stu-id="f3c46-162">Security</span></span>

<span data-ttu-id="f3c46-163">Ten wzorzec obsługuje potencjalnie poufne dane.</span><span class="sxs-lookup"><span data-stu-id="f3c46-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="f3c46-164">Upewnij się, że klucze są regularnie obracane, a uprawnienia na koncie usługi Azure Storage i udziałach lokalnych są prawidłowo ustawione.</span><span class="sxs-lookup"><span data-stu-id="f3c46-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f3c46-165">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="f3c46-165">Next steps</span></span>

<span data-ttu-id="f3c46-166">Aby dowiedzieć się więcej na temat tematów owanych w tym artykule:</span><span class="sxs-lookup"><span data-stu-id="f3c46-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="f3c46-167">W tym wzorcu jest używanych wiele usług powiązanych z IoT, w tym [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/)i [Azure Time Series Insights](/azure/time-series-insights/).</span><span class="sxs-lookup"><span data-stu-id="f3c46-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="f3c46-168">Aby dowiedzieć się więcej o projekcie Firmy Microsoft Brainwave, zobacz wpis w [blogu](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) i wyewidencjojnij film wideo Azure Accelerated Machine Learning with Project Brainwave (Usługa [Azure Accelerated Machine Learning z projektem Brainwave).](https://www.youtube.com/watch?v=DJfMobMjCX0)</span><span class="sxs-lookup"><span data-stu-id="f3c46-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="f3c46-169">Zobacz [Uwagi dotyczące projektowania aplikacji hybrydowych,](overview-app-design-considerations.md) aby dowiedzieć się więcej o najlepszych rozwiązaniach i uzyskać odpowiedzi na wszelkie dodatkowe pytania.</span><span class="sxs-lookup"><span data-stu-id="f3c46-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="f3c46-170">Zobacz Azure Stack [produktów i rozwiązań,](/azure-stack) aby dowiedzieć się więcej o całym portfolio produktów i rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="f3c46-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="f3c46-171">Gdy wszystko będzie gotowe do przetestowania przykładowego rozwiązania, przejdź do przewodnika wdrażania rozwiązania do wnioskowania usługi [Edge ML.](https://aka.ms/edgeinferencingdeploy)</span><span class="sxs-lookup"><span data-stu-id="f3c46-171">When you're ready to test the solution example, continue with the [Edge ML inferencing solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="f3c46-172">Przewodnik wdrażania zawiera instrukcje krok po kroku dotyczące wdrażania i testowania jego składników.</span><span class="sxs-lookup"><span data-stu-id="f3c46-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
